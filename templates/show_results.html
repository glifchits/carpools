{% extends "layout.html" %}

{% block title %} | Search results{% endblock %}
{% block content %}

<h2>
{% if departure and destination %}
  Leaving {{ departure }} to go to {{ destination }}
{% elif departure %}
  Rides leaving {{ departure }}
{% else %}
  Rides going to {{ destination }}
{% endif %}
</h2>

{% for (name, rides) in [
  ("Matches", matches), 
  ("Arriving", arriving), 
  ("Departing", departing) ] %}
{% if not rides %}
{% continue %}
{% endif %}
<span class=ride-type>{{ name }}</span> <span class=ride-count>{{ rides|length }} rides found</span>
<ul>
{% for ride in rides %}
<li>
  <span class=name>{{ ride.driver }}</span> is leaving
  <span class=departure>{{ ride.departure }}</span> to go to
  <span class=destination>{{ ride.destination }}</span>
  <a href='/rides/{{ ride._id }}'>Book it</a>
</li>
{% endfor %}
</ul>
{% endfor %}
{% endblock %}
